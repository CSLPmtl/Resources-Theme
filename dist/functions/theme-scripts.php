<?php

/**
 * Enqueue scripts and styles.
 * @package CSLP_Resources
 */

function cslpres_scripts() {
	$tdu = get_template_directory_uri() . '/assets/';

	// equeue CSS
	wp_enqueue_style( 'cslpres-style', $tdu . 'css/style.css', [], CSLPRES_VER );

	// smoothscrolling!
	wp_enqueue_script(
		'smoothscroll',
		'https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll@14/dist/smooth-scroll.polyfills.min.js',
		array(), false, true
	);

	// site logic
	if (CSLPRES_DEV) {
		wp_enqueue_script( 'cslpres-main-dev', $tdu . 'js/common.js', array('smoothscroll'), date("YmdHis"), true );
		wp_enqueue_script( 'cslpres-anim-dev', $tdu . 'js/animation.js', array(), date("YmdHis"), true );
	} else {
		wp_enqueue_script( 'cslpres-main', $tdu . 'js/min/common.min.js', array('smoothscroll'), CSLPRES_VER, true );
		wp_enqueue_script( 'cslpres-anim', $tdu . 'js/min/animation.min.js', array(), CSLPRES_VER, true );
	}

	wp_enqueue_script( 'cslpres-menu', $tdu . 'js/min/menu.min.js', array(), '333', true );

	if (is_front_page()) {
		wp_enqueue_script( 'cslpres-home', $tdu . 'js/min/home.min.js', array(), CSLPRES_VER, true );
	}

	// ABRA Stories Module
	if ( is_page_template('page-stories.php') ) {
		if (CSLPRES_DEV) {
			wp_enqueue_script( 'cslpres-stories', $tdu . 'js/stories.js', array('axios'), '', true );
		} else {
			wp_enqueue_script( 'cslpres-stories', $tdu . 'js/min/stories.min.js', array('axios'), CSLPRES_VER, true );
		}
	}

	// TODO: namespace these to ABRA
	// activities thing
	if ( is_page_template('page-templates/page-activities.php') ) {

		// wp_register_script( // the app build script generated by Webpack.
		// 	'vue_abra-activities_module',
		// 	'http://localhost:8080/app.js',
		// 	array(),
		// 	false,
		// 	true
		// );
    		// enqueue the Vue app script with localized data.
		// wp_enqueue_script( 'vue_abra-activities_module' );
		wp_enqueue_script( 'cslpres-stories', $tdu . 'js/min/activities.min.js', [], CSLPRES_VER, true );
	}
}
add_action( 'wp_enqueue_scripts', 'cslpres_scripts' );


// // Enqueue editor styles
// function clspres_add_editor_styles() {
// 	// disabled temporarily to integrate Gutenberg
// 	// add_editor_style( get_stylesheet_directory_uri() . '/assets/css/editor-style.css' );
// }
// add_action( 'admin_init', 'clspres_add_editor_styles' );
