!function r(c,o,l){function s(t,e){if(!o[t]){if(!c[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(d)return d(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var i=o[t]={exports:{}};c[t][0].call(i.exports,function(e){return s(c[t][1][e]||e)},i,i.exports,r,c,o,l)}return o[t].exports}for(var d="function"==typeof require&&require,e=0;e<l.length;e++)s(l[e]);return s}({1:[function(e,t,n){"use strict";var i=a(e("./util/stories.js")),r=a(e("./util/cat.js"));function a(e){return e&&e.__esModule?e:{default:e}}var c=axios.create({baseURL:"http://10.106.133.138/~mheming/resources/wp-json/wp/v2/"}),o={drillLevel:0,active:"none",levelstring:"",themeID:null,backone:function(){this.drillLevel-=1,console.log("state.drillLevel: ",o.drillLevel),this.drillLevel<=0&&(document.getElementById("drilldown").setAttribute("data-active","none"),document.getElementById("stories__by-cat").className="selected"),1==this.drillLevel&&(document.getElementById("cat-meta").className="",document.getElementById("story").className="hidden")},hidemeta:function(){document.querySelectorAll(".stories-meta")[0].className="stories-meta hidden"}},l=document.getElementById("stories__by-cat"),s=l.querySelectorAll(".category-card");document.getElementById("cat-meta").className="hidden";var d=document.getElementById("drilldown");s.forEach(function(a){a.addEventListener("click",function(e){e.preventDefault();var t=a.getAttribute("data-cat");if(r.default.isCached(t)){var n=JSON.parse(localStorage.getItem("abra_ac"+t));console.log("retrieved cached data: ID #"+t),o.levelstring="By category > "+n.name,r.default.setDOM(n,o,i.default,c)}else r.default.get(t,c,function(e){console.log("retrieved live data: ID #"+t),o.levelstring="By category > "+e.name,r.default.setDOM(e,o,i.default,c)});l.className="",d.setAttribute("data-active","cat")})}),document.getElementById("back-button").addEventListener("click",function(){o.backone()})},{"./util/cat.js":2,"./util/stories.js":3}],2:[function(e,t,n){"use strict";t.exports={isCached:function(e){return!!localStorage.getItem("abra_ac"+e)},cache:function(e){localStorage.setItem("abra_ac"+e.id,JSON.stringify(e))},get:function(e,t,n){var a=this;t.get("activity_cat/"+e).then(function(e){a.cache(e.data),n(e.data)}).catch("error",function(e){return console.warn(e),null})},setDOM:function(e,i,r,c){var t=document.getElementById("cat-meta");i.drillLevel=1,document.getElementById("cat-meta").className="",document.getElementById("story").className="hidden",console.log("cat: ",e),t.querySelectorAll("#cat-meta__header h2")[0].innerHTML=e.name,t.querySelectorAll("#cat-meta__header span")[0].innerHTML=i.levelstring,document.getElementById("cat-meta__content").innerHTML=e.description,setTimeout(r.getRelatedStories("activity?activity_cat="+e.id,function(n){var e=document.getElementById("cat-meta__list");e.className="isRefreshing",e.innerHTML="";for(var t=function(){var e=n[a],t=document.createElement("div");t.className="story",t.setAttribute("data-story",e.id),t.innerHTML="<h3>"+e.title.rendered+"</h3><p>"+e.stories_description+'</p><p class="meta"><b>Level:</b> '+r.level(e.story_level)+"</p>",document.getElementById("cat-meta__list").appendChild(t),t.addEventListener("click",function(){i.drillLevel+=1,r.showStory(e,i),r.getActivityIcon(e.id,c),r.getStoriesInCat("",function(e){},c)})},a=n.length-1;0<=a;a--)t();e.className=""},c),0)}}},{}],3:[function(e,t,n){"use strict";t.exports={getRelatedStories:function(e,t,n){n.get(e).then(function(e){t(e.data)}).catch("error",function(e){console.warn(e)})},showStory:function(e,t){document.getElementById("cat-meta").className="hidden";var n=document.getElementById("story");n.className="",document.getElementById("story-title").innerHTML=e.title.rendered,n.querySelectorAll("header span")[0].innerHTML=t.levelstring+" > "+e.title.rendered,document.getElementById("a-overview-c").innerHTML="<h4>Overview</h4>"+e.activity_description_activity_objective,document.getElementById("a-gfa-c").innerHTML="<h4>Group Facilitation Tips</h4>"+e.activity_description_activity_gfa,e.activity_description_activity_has_insights,document.getElementById("a-level-c").innerHTML="<h4>Levels</h4>"+e.activity_description_activity_level,document.getElementById("activity-video-container").innerHTML=this.makeEmbedLink(e.activity_video),console.log("activity: ",e)},level:function(e){switch(parseInt(e)){case 1:return"Beginner";case 2:return"Easy";case 3:return"Average";case 4:return"Advanced";case 5:return"Expert"}},makeTabContainer:function(e){},getActivityIcon:function(e,t){t.get("media?parent="+e).then(function(e){document.getElementById("activity-icon").innerHTML='<img src="'+e.data[0].media_details.sizes.thumbnail.source_url+'" alt="'+e.data[0].alt_text+'">'}).catch("error",function(e){return console.warn(e)})},getStoriesInCat:function(e,t,n){n.get(e).then(function(e){t(e.data)}).catch("error",function(e){console.warn(e)})},makeEmbedLink:function(e){var t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(t&&11!=t[2].length)return"error";return'<iframe width="560" height="315" src="//www.youtube.com/embed/'+t[2]+'" frameborder="0" allowfullscreen></iframe>'}}},{}]},{},[1]);